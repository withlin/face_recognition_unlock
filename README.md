# 人脸识别解锁系统

一个基于浏览器的纯前端人脸识别解锁系统，使用TensorFlow.js和BlazeFace模型实现实时人脸检测和识别。

## 功能特点

- 🎯 **纯前端实现**：无需后端服务器，所有处理在浏览器中完成
- 🔒 **隐私保护**：所有数据存储在本地localStorage，不上传服务器
- 👁️ **实时人脸检测**：基于TensorFlow.js BlazeFace模型
- 🛡️ **活体检测**：眨眼检测和头部姿态变化防止照片/视频欺骗
- 📱 **跨平台兼容**：支持现代浏览器的摄像头API
- ⚡ **高性能**：毫秒级人脸检测和识别响应

## 技术栈

- **前端框架**：原生JavaScript
- **机器学习**：TensorFlow.js + BlazeFace
- **数据存储**：localStorage
- **UI样式**：CSS3
- **摄像头访问**：WebRTC getUserMedia API

## 系统架构

### 核心组件

1. **FaceRecognitionSystem**：主系统类
   - 人脸检测和特征提取
   - 活体检测算法
   - 用户界面管理

2. **LocalStorageManager**：本地存储管理
   - 用户数据管理
   - 人脸特征数据存储
   - 数据持久化

### 人脸识别流程

#### 录入模式
1. 用户注册/登录
2. 启动摄像头
3. 4步骤人脸数据采集：
   - 正面人脸
   - 左转头部
   - 右转头部
   - 眨眼检测
4. 特征提取和存储

#### 解锁模式
1. 实时人脸检测
2. 活体检测验证
3. 特征比对（多种算法）：
   - 余弦相似度
   - 欧几里得距离
   - 皮尔逊相关系数
4. 综合评分判断

## 安装和运行

### 环境要求
- 现代浏览器（Chrome、Firefox、Safari、Edge）
- 摄像头设备
- HTTPS或localhost环境（摄像头权限要求）

### 快速开始

1. **克隆项目**
   ```bash
   git clone <repository-url>
   cd face_recognition_unlock
   ```

2. **启动HTTP服务器**
   ```bash
   # 使用Python
   python3 -m http.server 8000
   
   # 或使用Node.js
   npx serve .
   
   # 或使用其他HTTP服务器
   ```

3. **访问应用**
   打开浏览器访问：`http://localhost:8000`

## 使用说明

### 首次使用

1. **用户注册**
   - 输入用户名和密码
   - 点击"注册"按钮

2. **人脸录入**
   - 允许摄像头权限
   - 按照提示完成4个步骤的人脸采集
   - 确保光线充足，人脸清晰可见

3. **完成设置**
   - 系统自动保存人脸特征数据
   - 可以开始使用解锁功能

### 日常使用

1. **人脸解锁**
   - 选择已注册用户
   - 面向摄像头
   - 按提示进行眨眼等活体检测
   - 系统自动识别并解锁

2. **数据管理**
   - 可以重新录入人脸数据
   - 清除所有数据重新开始
   - 切换不同用户账户

## 技术细节

### 人脸特征提取

基于BlazeFace的6个关键点：
- 右眼、左眼
- 鼻尖
- 嘴巴中心
- 右耳、左耳

提取特征包括：
- 眼间距离
- 眼鼻距离
- 鼻嘴距离
- 面部宽高比
- 关键点相对位置

### 活体检测算法

1. **眨眼检测**
   - 基于眼部关键点计算眼部纵横比
   - 检测眨眼动作的时序变化
   - 防止静态照片攻击

2. **头部姿态检测**
   - 计算头部的俯仰角、偏航角、翻滚角
   - 检测自然的头部微动
   - 防止视频回放攻击

### 相似度计算

使用多种算法综合评估：

1. **余弦相似度**：计算特征向量夹角
2. **欧几里得距离**：计算特征空间距离
3. **皮尔逊相关系数**：计算线性相关性

最终得分 = (余弦相似度 × 0.4) + ((1-归一化欧氏距离) × 0.4) + (皮尔逊系数 × 0.2)

## 安全特性

- **本地存储**：所有数据保存在用户设备，不上传云端
- **多重验证**：结合多种生物特征和活体检测
- **防欺骗**：眨眼检测和头部姿态变化
- **阈值控制**：可调节识别敏感度

## 浏览器兼容性

| 浏览器 | 版本要求 | 支持状态 |
|--------|----------|----------|
| Chrome | 60+ | ✅ 完全支持 |
| Firefox | 55+ | ✅ 完全支持 |
| Safari | 11+ | ✅ 完全支持 |
| Edge | 79+ | ✅ 完全支持 |

## 性能优化

- **模型加载**：异步加载BlazeFace模型
- **帧率控制**：智能调节检测频率
- **内存管理**：及时释放图像数据
- **缓存策略**：复用计算结果

## 故障排除

### 常见问题

1. **摄像头无法访问**
   - 检查浏览器权限设置
   - 确保使用HTTPS或localhost
   - 检查摄像头设备连接

2. **模型加载失败**
   - 检查网络连接
   - 清除浏览器缓存
   - 尝试刷新页面

3. **识别准确率低**
   - 确保光线充足
   - 保持人脸正对摄像头
   - 重新录入人脸数据

4. **活体检测失败**
   - 按提示进行眨眼动作
   - 保持自然的头部微动
   - 避免过度静止

## 开发说明

### 项目结构
```
face_recognition_unlock/
├── index.html          # 主页面
├── script.js           # 核心JavaScript代码
├── style.css           # 样式文件
└── README.md           # 项目文档
```

### 核心类说明

- `FaceRecognitionSystem`：主系统类，处理人脸检测和识别
- `LocalStorageManager`：本地存储管理类

### 扩展开发

1. **添加新的活体检测算法**
2. **优化特征提取算法**
3. **增加更多生物特征**
4. **改进UI/UX设计**

## 许可证

MIT License

## 贡献

欢迎提交Issue和Pull Request来改进项目。

## 更新日志

### v0.0.1
- 初始版本发布
- 基础人脸识别功能
- 活体检测算法
- 纯前端实现

---

**注意**：本项目仅用于演示和学习目的，在生产环境中使用时请考虑更严格的安全措施。